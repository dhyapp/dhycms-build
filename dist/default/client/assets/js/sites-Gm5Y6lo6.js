import{r as e,k as d,d as m,q as y}from"./coms-BJ4SXf9r.js";import{bG as n}from"./ant1-FgANxHEo.js";const o=async({maxRetry:t=10,baseUrl:s=""})=>{const r=()=>new Promise(a=>{try{fetch(`${s}/api/v1/__dhycms_restart_heart`).then(async i=>await i.text()).then(i=>{i==1?a(!0):a(!1)}).catch(()=>{a(!1)})}catch{a(!1)}});for(let a=0;a<t;a++){if(await r())return!0;await d(5e3)}return!1},g=(t={},s={})=>e("/api/v1/admin/sites/add",{method:"POST",body:JSON.stringify(t),...s}),p=(t={},s={})=>e("/api/v1/admin/sites/1stop",{method:"POST",body:JSON.stringify(t),...s}),f=(t={},s={})=>e("/api/v1/admin/sites/1start",{method:"POST",body:JSON.stringify(t),...s}),h=(t={},s={})=>e("/api/v1/admin/sites/1restart",{method:"POST",body:JSON.stringify(t),...s}),l=(t={},s={})=>e("/api/v1/admin/sites/1del",{method:"DELETE",body:JSON.stringify(t),...s}),O=(t={},s={})=>e("/api/v1/admin/sites/1sync",{method:"POST",body:JSON.stringify(t),...s}),P=()=>new Promise(async(t,s)=>{const r=n.loading("系统重启中...");try{await e("/api/v1/admin/sites/1restartall",{method:"POST"}).then(async()=>{await o({}).then(()=>{n.success("系统重启成功"),t()}).catch(a=>{const i=(a==null?void 0:a.msg)||(a==null?void 0:a.message)||"系统重启失败";n.error(i),s(a)})})}finally{r()}}),b=()=>new Promise(async(t,s)=>{const r=n.loading("站点重启中...");try{const a=m();h({name:a.appname}),await o({}).then(()=>{n.success("站点重启成功"),t()}).catch(i=>{const c=(i==null?void 0:i.msg)||(i==null?void 0:i.message)||"系统重启失败";n.error(c),s(i)})}finally{r()}}),v=(t={},s={})=>e("/api/v1/admin/sites/1domain",{method:"PUT",body:JSON.stringify(t),...s}),N=(t={},s={})=>e("/api/v1/admin/sites/1nginx",{method:"PUT",body:JSON.stringify(t),...s}),T=t=>e(`/api/v1/admin/sites/1nginx?${y(t)}`),w=(t={},s={})=>e("/api/v1/admin/sites/1ssl",{method:"POST",body:JSON.stringify(t),...s});export{P as a,N as b,w as c,p as d,f as e,h as f,T as g,l as h,g as i,b as r,O as s,v as u};
