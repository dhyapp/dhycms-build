import{_ as D}from"./admin-form-action-bar-CaxKRg0f.js";import{I as N,e as A,F as n,f as p}from"./ant2-F-VMf9eP.js";import{aL as R,bP as C,bQ as G,aA as M,bD as q,bG as z}from"./ant1-FgANxHEo.js";import{f as i,V as _,Z as E,$ as u,X as r,W as x,F as w,a7 as K,Y as $,k as e,u as o,a4 as Q,c as T,o as W,a6 as S,G as y}from"./vue-DoSrNxHp.js";import{_ as P}from"./cloud-poster-upload-DoFHsbIw.js";import{u as X}from"./coms-BJ4SXf9r.js";import{d as L}from"./index-fks0TXNb.js";import"./modal-HJgcDYUy.js";import"./main-DsqflK1t.js";import"./index-DMU2ysKL.js";const Y={class:"dhy-tiny-input-color"},Z={class:"f fw ac"},j=["onClick"],V={__name:"tinyColorInput",props:{modelValue:{type:String,default:""},colors:{type:Array,default:()=>["rgb(16, 160, 59)","rgb(221, 82, 77)","rgb(41, 131, 235)","rgb(140, 41, 235)","rgb(8, 176, 176)"]}},emits:["update:modelValue"],setup(v,{emit:k}){const h=v,f=k,m=i(h.modelValue),c=s=>{typeof s=="string"&&(m.value=s),f("update:modelValue",m.value)};return(s,b)=>(_(),E(o(R),{overlayClassName:"dhy-tiny-input-color-overlay"},{overlay:u(()=>[r("div",Z,[(_(!0),x(w,null,K(v.colors,l=>(_(),x("div",{class:"color-block",key:l,style:$({backgroundColor:l}),onClick:g=>c(l)},null,12,j))),128))])]),default:u(()=>[r("div",Y,[r("span",{class:"color-block",style:$({backgroundColor:v.modelValue})},null,4),e(o(N),{value:m.value,"onUpdate:value":b[0]||(b[0]=l=>m.value=l),onChange:c},null,8,["value"])])]),_:1}))}},H={class:"f ac"},J={class:"pannel"},O={class:"max-800 pt20 pr20 pb30 pl30"},pe={__name:"theme",setup(v){const k=Q(),h=X(),f=T(()=>h.preadmin),m=i(!1),c={label:6,wrapper:24},s=i(!1),b=i(),l=i({theme:"rgb(16, 160, 59)",themeSecond:"#ff6ea1",themeLight:"#2ccc5a",themeDark:"#0d712a",banner:"",bgtop:"",bgbottom:"",pccols:10,mcols:3,appcols:12,mappcols:5,pccolsPost:2,mcolsPost:1}),g=`template-${k.params.templateName}`,F=async()=>{try{m.value=!0,await L.get({query:{fieldby:"key",field:g}}).then(d=>{d!=null&&d.value&&(l.value=d==null?void 0:d.value)})}finally{m.value=!1}},I=async()=>{try{s.value=!0,await L.update({query:{fieldby:"key",field:g},body:{value:l.value,key:g,_upsert:!0}}).then(()=>{z.success("保存成功")})}finally{s.value=!1}};return W(()=>{F()}),(d,a)=>{const B=S("MIcon"),U=S("RouterLink");return _(),x(w,null,[e(o(G),null,{default:u(()=>[e(o(C),null,{default:u(()=>[e(U,{to:`/${f.value}`},{default:u(()=>[e(B,{name:"dashboard",class:"mr6"}),y("控制台")]),_:1},8,["to"])]),_:1}),e(o(C),null,{default:u(()=>[e(U,{to:`/${f.value}/templates`},{default:u(()=>[y("模板管理")]),_:1},8,["to"])]),_:1}),e(o(C),null,{default:u(()=>[y("主题设置")]),_:1})]),_:1}),e(D,{class:"mt14"},{default:u(()=>[r("div",H,[e(o(M),{type:"primary",loading:s.value,onClick:a[0]||(a[0]=t=>I("appearance"))},{default:u(()=>[y("保存")]),_:1},8,["loading"])])]),_:1}),r("div",J,[r("div",O,[e(o(q),{spinning:m.value},{default:u(()=>[e(o(A),{ref_key:"appeFormRef",ref:b,model:l.value,labelAlign:"left",labelCol:{span:c.label}},{default:u(()=>[e(o(n),{name:"theme",label:"主题色"},{default:u(()=>[e(V,{modelValue:l.value.theme,"onUpdate:modelValue":a[1]||(a[1]=t=>l.value.theme=t)},null,8,["modelValue"])]),_:1}),e(o(n),{name:"themeSecond",label:"点缀色"},{default:u(()=>[e(V,{modelValue:l.value.themeSecond,"onUpdate:modelValue":a[2]||(a[2]=t=>l.value.themeSecond=t)},null,8,["modelValue"])]),_:1}),e(o(n),{name:"themeLight",label:"高亮背景色"},{default:u(()=>[e(V,{modelValue:l.value.themeLight,"onUpdate:modelValue":a[3]||(a[3]=t=>l.value.themeLight=t)},null,8,["modelValue"])]),_:1}),e(o(n),{name:"themeDark",label:"暗色背景色"},{default:u(()=>[e(V,{modelValue:l.value.themeDark,"onUpdate:modelValue":a[4]||(a[4]=t=>l.value.themeDark=t)},null,8,["modelValue"])]),_:1}),e(o(n),{name:"banner",label:"头部横幅"},{default:u(()=>[e(P,{mode:"whole",text:"上传头部横幅",modelValue:l.value.banner,"onUpdate:modelValue":a[5]||(a[5]=t=>l.value.banner=t)},null,8,["modelValue"])]),_:1}),e(o(n),{name:"bgtop",label:"背景图（顶部）"},{default:u(()=>[e(P,{mode:"whole",text:"上传背景图（顶部）",modelValue:l.value.bgtop,"onUpdate:modelValue":a[6]||(a[6]=t=>l.value.bgtop=t)},null,8,["modelValue"])]),_:1}),e(o(n),{name:"bgbottom",label:"背景图（底部）"},{default:u(()=>[e(P,{mode:"whole",text:"上传背景图（底部）",modelValue:l.value.bgbottom,"onUpdate:modelValue":a[7]||(a[7]=t=>l.value.bgbottom=t)},null,8,["modelValue"])]),_:1}),e(o(n),{name:"pccols",label:"PC端链接列数"},{default:u(()=>[e(o(p),{value:l.value.pccols,"onUpdate:value":a[8]||(a[8]=t=>l.value.pccols=t),min:2,max:12,placeholder:"请输入"},null,8,["value"])]),_:1}),e(o(n),{name:"mcols",label:"移动端链接列数"},{default:u(()=>[e(o(p),{value:l.value.mcols,"onUpdate:value":a[9]||(a[9]=t=>l.value.mcols=t),min:1,max:4,placeholder:"请输入"},null,8,["value"])]),_:1}),e(o(n),{name:"appcols",label:"PC端APP列数"},{default:u(()=>[e(o(p),{value:l.value.appcols,"onUpdate:value":a[10]||(a[10]=t=>l.value.appcols=t),min:2,max:14,placeholder:"请输入"},null,8,["value"])]),_:1}),e(o(n),{name:"mappcols",label:"移动端APP列数"},{default:u(()=>[e(o(p),{value:l.value.mappcols,"onUpdate:value":a[11]||(a[11]=t=>l.value.mappcols=t),min:1,max:8,placeholder:"请输入"},null,8,["value"])]),_:1}),e(o(n),{name:"pccolsPost",label:"PC端文章列数"},{default:u(()=>[e(o(p),{value:l.value.pccolsPost,"onUpdate:value":a[12]||(a[12]=t=>l.value.pccolsPost=t),min:2,max:12,placeholder:"请输入"},null,8,["value"])]),_:1}),e(o(n),{name:"mcolsPost",label:"移动端文章列数"},{default:u(()=>[e(o(p),{value:l.value.mcolsPost,"onUpdate:value":a[13]||(a[13]=t=>l.value.mcolsPost=t),min:1,max:4,placeholder:"请输入"},null,8,["value"])]),_:1})]),_:1},8,["model","labelCol"])]),_:1},8,["spinning"])])])],64)}}};export{pe as default};
