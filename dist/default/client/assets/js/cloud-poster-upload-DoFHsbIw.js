import{f as i,n as y,V as r,W as u,X as o,F as c,m as b,B as k,a1 as w,ab as S,k as C}from"./vue-DoSrNxHp.js";import{_ as L}from"./modal-HJgcDYUy.js";const h={key:1,class:"f fc"},x=o("div",{class:"fs30"},"+",-1),D={__name:"cloud-poster-upload",props:{modelValue:String,previewURL:String,mode:{type:String,default:"cover"},text:{type:String,default:"上传图片"}},emits:["update:modelValue"],setup(e,{emit:m}){const t=i(!1),n=m,a=i(!1),v=()=>{n("update:modelValue","")},d=i(""),f=async l=>{if(l.length)try{a.value=!0,l[0].blobSrc&&(d.value=l[0].blobSrc),n("update:modelValue",""),setTimeout(()=>n("update:modelValue",l[0].src),0),t.value=!1}finally{a.value=!1}},p=()=>{a.value=!1};return(l,s)=>{const g=y("depic");return r(),u(c,null,[o("div",{class:S(["cloud-poster-upload",[`cloud-poster-mode-${e.mode}`,e.mode==="whole"?"whole":""]]),onClick:s[0]||(s[0]=()=>t.value=!0)},[e.modelValue?(r(),u(c,{key:0},[b(o("img",null,null,512),[[g,d.value||e.previewURL||e.modelValue]]),o("div",{class:"close",onClick:k(v,["stop"])},"×")],64)):(r(),u("div",h,[x,o("div",null,w(e.text),1)]))],2),C(L,{open:t.value,"onUpdate:open":s[1]||(s[1]=V=>t.value=V),confirmLoading:a.value,onInsert:f,onCancel:p},null,8,["open","confirmLoading"])],64)}}};export{D as _};
