import{g as F,s as O,a as K,b as M,c as N,r as P}from"./setting-i7Ud-o8u.js";import{bU as G,bD as I,bT as $,aA as k,bV as j,bH as x,bG as u}from"./ant1-FgANxHEo.js";import{e as z,F as v,A as C,p as D,j as L}from"./ant2-F-VMf9eP.js";import{f as i,o as H,V as W,W as X,k as e,$ as s,u as a,X as m,G as w}from"./vue-DoSrNxHp.js";import"./coms-BGBaUFfq.js";const q={class:"pannel setting-marketing-page"},J={class:"setting-max-1000 pt20 pr20 pb30 pl30"},Q={class:"f ac"},Y=m("span",{class:"ml10"},"发布文章后自动追加URL到网站地图",-1),ne={__name:"sitemap",setup(Z){const S=i("sitemap"),g={label:6,wrapper:24},h=i(null),r=i({auto:!1}),o=i(!1),p=i(!1),c=i(""),d=i(""),f={sitemap:[h,r]},_=i(!1),y=i(!1),U=async l=>{try{y.value=!0,await F({key:l},{error(){}}).then(t=>{if(t){const n=f[l][1].value;for(const b in n)f[l][1].value[b]=t[b]??f[l][1].value[b]}})}finally{y.value=!1}},R=async l=>{try{const t=f[l][1].value;_.value=!0,await O({key:l,value:t}).then(()=>{u.success("保存成功")})}finally{_.value=!1}},T=l=>{U(l)},B=async()=>{try{o.value=!0,await K().then(l=>{d.value=l,p.value=!0})}finally{o.value=!1}},A=async()=>{try{o.value=!0,await M(c.value).then(()=>{u.success("追加成功"),c.value=""})}finally{o.value=!1}},E=async()=>{try{o.value=!0,await N(d.value).then(()=>{u.success("保存成功"),p.value=!1})}finally{o.value=!1}},V=()=>{x.confirm({centered:!0,title:"确认初始化网站地图",content:"该操作无法逆转，请谨慎操作！",async onOk(){const l=u.loading("网站地图初始化中..");try{return await P().then(()=>{u.success("初始化完成")})}finally{l()}}})};return H(()=>{U("sitemap")}),(l,t)=>(W(),X("div",q,[e(a(j),{activeKey:S.value,"onUpdate:activeKey":t[3]||(t[3]=n=>S.value=n),onChange:T},{default:s(()=>[e(a(G),{key:"sitemap",tab:"网站地图"},{default:s(()=>[m("div",J,[e(a(I),{spinning:y.value},{default:s(()=>[e(a(z),{ref_key:"formRef",ref:h,model:r.value,labelAlign:"left","label-col":{span:g.label}},{default:s(()=>[e(a(v),{wrapperCol:{offset:g.label}},{default:s(()=>[e(a(C),{message:"请使用主域名生成网站地图（发布文章或追加URL），否则网站地图将产生偏差，不利于SEO。",type:"warning","show-icon":"",banner:""}),e(a(C),{message:"若需要多个域名SEO，请使用站群管理建立分站，并设置站点同步。",type:"warning","show-icon":"",banner:"",class:"mt8"})]),_:1},8,["wrapperCol"]),e(a(v),{label:"自动追加URL",name:"auto",onClick:t[1]||(t[1]=n=>R("sitemap"))},{default:s(()=>[m("div",Q,[e(a(D),{checked:r.value.auto,"onUpdate:checked":t[0]||(t[0]=n=>r.value.auto=n)},null,8,["checked"]),Y])]),_:1}),e(a(v),{label:"手动追加URL"},{default:s(()=>[e(a(L),{value:c.value,"onUpdate:value":t[2]||(t[2]=n=>c.value=n),placeholder:"请输入https链接\r多个URL请换行",style:{"max-width":"400px",height:"200px"}},null,8,["value"])]),_:1}),e(a(v),{wrapperCol:{offset:g.label}},{default:s(()=>[e(a($),{size:"middle"},{default:s(()=>[e(a(k),{type:"primary",loading:o.value,onClick:A},{default:s(()=>[w("追加")]),_:1},8,["loading"]),e(a(k),{onClick:V},{default:s(()=>[w("初始化网站地图")]),_:1}),e(a(k),{loading:o.value,onClick:B},{default:s(()=>[w("查看源码")]),_:1},8,["loading"])]),_:1})]),_:1},8,["wrapperCol"])]),_:1},8,["model","label-col"])]),_:1},8,["spinning"])])]),_:1})]),_:1},8,["activeKey"]),e(a(x),{open:p.value,"onUpdate:open":t[5]||(t[5]=n=>p.value=n),title:"网站地图",width:800,cancelText:"关闭",okText:"保存",okButtonProps:{loading:o.value},onOk:E},{default:s(()=>[m("div",null,[e(a(L),{value:d.value,"onUpdate:value":t[4]||(t[4]=n=>d.value=n),style:{height:"600px"}},null,8,["value"])])]),_:1},8,["open","okButtonProps"])]))}};export{ne as default};
