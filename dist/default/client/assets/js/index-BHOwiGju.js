import{ae as z,f as n,r as y,W as A,k as a,$ as l,u as e,V as G,X as k,G as d,J as R}from"./vue-DoSrNxHp.js";import{u as I}from"./coms-BGBaUFfq.js";import{u as K,g as x,b as N}from"./user-BQV4nex-.js";import{e as _,F as t,I as m,A as E}from"./ant2-F-VMf9eP.js";import{bU as g,bT as C,aA as i,bV as J,bG as $}from"./ant1-FgANxHEo.js";const L={class:"pannel"},W={class:"form-max"},X={class:"form-max pt30"},j={class:"form-max pt30"},Z={__name:"index",setup(D){const f=I(),v=z(),F=n("profile"),o={label:4,wrapper:16},p=y({username:f.user.username,nickname:f.user.nickname}),S=n(null),w=n(!1),T=async()=>{try{w.value=!0,await S.value.validate(),await K(R(p)).then(()=>{$.success("保存成功"),x()})}finally{w.value=!1}},b=y({username:f.user.email}),V=n(null),q=n(!1),u=y({password:"",newpassword:""}),U=n(null),c=n(!1),B=async()=>{try{c.value=!0,await U.value.validate(),await N(R(u)).then(()=>{$.success("保存成功"),x()})}finally{c.value=!1}};return(P,s)=>(G(),A("div",L,[a(e(J),{activeKey:F.value,"onUpdate:activeKey":s[11]||(s[11]=r=>F.value=r)},{default:l(()=>[a(e(g),{key:"profile",tab:"个人资料"},{default:l(()=>[k("div",W,[a(e(_),{ref_key:"profileFormRef",ref:S,model:p,"label-col":{span:o.label},"wrapper-col":{span:o.wrapper},class:"pt30 pb20"},{default:l(()=>[a(e(t),{label:"用户名",name:"username",rules:[{required:!0,message:"用户名不能为空"}]},{default:l(()=>[a(e(m),{value:p.username,"onUpdate:value":s[0]||(s[0]=r=>p.username=r)},null,8,["value"])]),_:1}),a(e(t),{label:"昵称",name:"nickname"},{default:l(()=>[a(e(m),{value:p.nickname,"onUpdate:value":s[1]||(s[1]=r=>p.nickname=r)},null,8,["value"])]),_:1}),a(e(t),{wrapperCol:{offset:o.label}},{default:l(()=>[a(e(C),{size:"middle"},{default:l(()=>[a(e(i),{type:"primary",loading:w.value,onClick:s[2]||(s[2]=r=>T())},{default:l(()=>[d("保存")]),_:1},8,["loading"]),a(e(i),{onClick:s[3]||(s[3]=r=>e(v).back())},{default:l(()=>[d("返回")]),_:1})]),_:1})]),_:1},8,["wrapperCol"])]),_:1},8,["model","label-col","wrapper-col"])])]),_:1}),a(e(g),{key:"email",tab:"修改邮箱"},{default:l(()=>[k("div",X,[a(e(_),{ref_key:"emailFormRef",ref:V,model:b,"label-col":{span:o.label},"wrapper-col":{span:o.wrapper},class:"pb20"},{default:l(()=>[a(e(t),{wrapperCol:{offset:o.label,span:o.wrapper}},{default:l(()=>[a(e(E),{message:"邮箱可用于登录和修改密码",type:"info","show-icon":""})]),_:1},8,["wrapperCol"]),a(e(t),{label:"邮箱",name:"username",rules:[{required:!0,message:"邮箱不能为空"}]},{default:l(()=>[a(e(m),{id:"email",value:b.email,"onUpdate:value":s[4]||(s[4]=r=>b.email=r)},null,8,["value"])]),_:1}),a(e(t),{wrapperCol:{offset:o.label}},{default:l(()=>[a(e(C),{size:"middle"},{default:l(()=>[a(e(i),{type:"primary",loading:q.value,onClick:s[5]||(s[5]=r=>P.onEmailSave())},{default:l(()=>[d("保存")]),_:1},8,["loading"]),a(e(i),{onClick:s[6]||(s[6]=r=>e(v).back())},{default:l(()=>[d("返回")]),_:1})]),_:1})]),_:1},8,["wrapperCol"])]),_:1},8,["model","label-col","wrapper-col"])])]),_:1}),a(e(g),{key:"password",tab:"修改密码"},{default:l(()=>[k("div",j,[a(e(_),{ref_key:"pwdFormRef",ref:U,model:u,"label-col":{span:o.label},"wrapper-col":{span:o.wrapper},class:"pb20"},{default:l(()=>[a(e(t),{label:"旧密码",name:"password",rules:[{required:!0,message:"密码不能为空"}]},{default:l(()=>[a(e(m),{value:u.password,"onUpdate:value":s[7]||(s[7]=r=>u.password=r),type:"password"},null,8,["value"])]),_:1}),a(e(t),{label:"新密码",name:"newpassword",rules:[{required:!0,message:"密码不能为空"}]},{default:l(()=>[a(e(m),{value:u.newpassword,"onUpdate:value":s[8]||(s[8]=r=>u.newpassword=r),type:"password"},null,8,["value"])]),_:1}),a(e(t),{wrapperCol:{offset:o.label}},{default:l(()=>[a(e(C),{size:"middle"},{default:l(()=>[a(e(i),{type:"primary",loading:c.value,onClick:s[9]||(s[9]=r=>B())},{default:l(()=>[d("保存")]),_:1},8,["loading"]),a(e(i),{onClick:s[10]||(s[10]=r=>e(v).back())},{default:l(()=>[d("返回")]),_:1})]),_:1})]),_:1},8,["wrapperCol"])]),_:1},8,["model","label-col","wrapper-col"])])]),_:1})]),_:1},8,["activeKey"])]))}};export{Z as default};
