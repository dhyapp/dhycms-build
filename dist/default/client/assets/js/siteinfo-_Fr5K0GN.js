import{_ as y}from"./cloud-poster-upload-DoFHsbIw.js";import{_ as L}from"./index-DBsdTIEy.js";import{d as c}from"./index-fks0TXNb.js";import{u as R}from"./coms-BJ4SXf9r.js";import{bU as S,bD as g,bT as C,aA as $,bV as B,bG as h}from"./ant1-FgANxHEo.js";import{e as N,F as s,I as k,j as _}from"./ant2-F-VMf9eP.js";import{f as i,r as F,w as G,o as I,V as w,W as K,k as l,$ as n,u as o,X as j,Z as q,a2 as A,G as E,J as V}from"./vue-DoSrNxHp.js";import"./modal-HJgcDYUy.js";import"./main-DsqflK1t.js";import"./index-DMU2ysKL.js";const M={class:"pannel setting-siteinfo-page"},z={class:"setting-max-800 pt20 pr20 pb30 pl30"},le={__name:"siteinfo",setup(D){const f=R(),p=i("siteinfo"),m={label:6,wrapper:24},U=i(null),e=F({logo:"",ico:"",title:"",shortTitle:"",keys:"",description:"",footer:""}),d=i(!1),u=i(!1),v=i(null),b=i(!1),x=async()=>{try{u.value=!0,await c.get({query:{fieldby:"key",field:"siteinfo"}}).then(r=>{if(r!=null&&r.value){const a=V(e);for(const t in a)e[t]=r.value[t]||e[t]}b.value=!0})}finally{u.value=!1}},T=async()=>{try{d.value=!0,await c.update({query:{fieldby:"key",field:"siteinfo"},body:{value:V(e),key:"siteinfo",_upsert:!0}}).then(()=>{h.success("保存成功")})}finally{d.value=!1}};return G(()=>f.theme,()=>{v.value.reload()}),I(()=>{x()}),(r,a)=>(w(),K("div",M,[l(o(B),{activeKey:p.value,"onUpdate:activeKey":a[8]||(a[8]=t=>p.value=t)},{default:n(()=>[l(o(S),{key:"siteinfo",tab:"站点信息"},{default:n(()=>[j("div",z,[l(o(g),{spinning:u.value},{default:n(()=>[l(o(N),{ref_key:"formRef",ref:U,model:e,labelAlign:"left","label-col":{span:m.label}},{default:n(()=>[l(o(s),{label:"网站 Logo"},{default:n(()=>[l(y,{mode:"whole",text:"上传 Logo",modelValue:e.logo,"onUpdate:modelValue":a[0]||(a[0]=t=>e.logo=t),previewURL:`${e.logo}?180x100`},null,8,["modelValue","previewURL"])]),_:1}),l(o(s),{label:"网站 ico"},{default:n(()=>[l(y,{mode:"whole",text:"上传 ico",modelValue:e.ico,"onUpdate:modelValue":a[1]||(a[1]=t=>e.ico=t),previewURL:`${e.logo}?180x100`},null,8,["modelValue","previewURL"])]),_:1}),l(o(s),{label:"网站标题",name:"title"},{default:n(()=>[l(o(k),{value:e.title,"onUpdate:value":a[2]||(a[2]=t=>e.title=t)},null,8,["value"])]),_:1}),l(o(s),{label:"网站简称",name:"shortTitle"},{default:n(()=>[l(o(k),{value:e.shortTitle,"onUpdate:value":a[3]||(a[3]=t=>e.shortTitle=t),placeholder:"网站Logo为空时将显示网站简称"},null,8,["value"])]),_:1}),l(o(s),{label:"网站关键词",name:"keys"},{default:n(()=>[l(o(_),{value:e.keys,"onUpdate:value":a[4]||(a[4]=t=>e.keys=t),placeholder:"多个关键词请用英文逗号隔开"},null,8,["value"])]),_:1}),l(o(s),{label:"网站描述",name:"description"},{default:n(()=>[l(o(_),{value:e.description,"onUpdate:value":a[5]||(a[5]=t=>e.description=t),placeholder:"请用2~4句话描述网站内容"},null,8,["value"])]),_:1}),l(o(s),{label:"底部版权信息"},{default:n(()=>[l(o(g),{spinning:u.value,class:"f ac jc",style:{"min-height":"120px"}},{default:n(()=>[b.value?(w(),q(L,{key:0,ref_key:"editorRef",ref:v,modelValue:e.footer,"onUpdate:modelValue":a[6]||(a[6]=t=>e.footer=t),dark:o(f).theme==="dark",options:{inline:!0}},null,8,["modelValue","dark"])):A("",!0)]),_:1},8,["spinning"])]),_:1}),l(o(s),{wrapperCol:{offset:m.label}},{default:n(()=>[l(o(C),{size:"middle"},{default:n(()=>[l(o($),{type:"primary",loading:d.value,onClick:a[7]||(a[7]=t=>T())},{default:n(()=>[E("保存")]),_:1},8,["loading"])]),_:1})]),_:1},8,["wrapperCol"])]),_:1},8,["model","label-col"])]),_:1},8,["spinning"])])]),_:1})]),_:1},8,["activeKey"])]))}};export{le as default};
