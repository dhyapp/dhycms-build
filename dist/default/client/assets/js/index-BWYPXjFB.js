import{r as D,q as L,u as B}from"./coms-BJ4SXf9r.js";import{k as M,n as T}from"./ant2-F-VMf9eP.js";import{bP as g,bQ as V,bU as b,bV as S,bD as Y}from"./ant1-FgANxHEo.js";import{c as q,f as o,o as I,a6 as y,V as K,W as N,k as e,$ as t,u as a,G as k,X as n,a1 as P,y as U}from"./vue-DoSrNxHp.js";const $=(m={},r={})=>D(`/api/v1/admin/logs?${L(m)}`,r),w={class:"logs-box"},E={class:"pannel mt14 logs-page"},G={class:"f ac"},R=n("span",{class:"mr14"},"日期",-1),j={class:"pt20 pl20 pb20 pr20"},A={__name:"index",setup(m){const r=B(),h=q(()=>r.preadmin),c=o("err"),u=o(M()),i=o(!1),d=o(""),v=o(),_=async()=>{try{i.value=!0,await $({type:c.value,date:u.value.format("YYYY-MM-DD")},{error:s=>{s.msg&&(d.value=s.msg||"日志获取失败")}}).then(s=>{d.value=s,U(()=>{v.value.scroll(0,999999)})})}finally{i.value=!1}},f=()=>{_()};return I(()=>{_()}),(s,l)=>{const x=y("MIcon"),C=y("RouterLink");return K(),N("div",w,[e(a(V),null,{default:t(()=>[e(a(g),null,{default:t(()=>[e(C,{to:`/${h.value}`},{default:t(()=>[e(x,{name:"dashboard",class:"mr6"}),k("控制台")]),_:1},8,["to"])]),_:1}),e(a(g),null,{default:t(()=>[k("日志")]),_:1})]),_:1}),n("div",E,[e(a(S),{activeKey:c.value,"onUpdate:activeKey":l[1]||(l[1]=p=>c.value=p),onChange:f},{rightExtra:t(()=>[n("div",G,[R,e(a(T),{value:u.value,"onUpdate:value":l[0]||(l[0]=p=>u.value=p),onChange:f},null,8,["value"])])]),default:t(()=>[e(a(b),{key:"err",tab:"错误"}),e(a(b),{key:"out",tab:"输出"})]),_:1},8,["activeKey"]),n("div",{ref_key:"scroller",ref:v,class:"logs-ctx scroll"},[e(a(Y),{spinning:i.value},{default:t(()=>[n("div",j,P(d.value),1)]),_:1},8,["spinning"])],512)])])}}};export{A as default};
